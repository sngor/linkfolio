(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{60116:(e,a,l)=>{"use strict";l.r(a),l.d(a,{default:()=>r});var n=l(95155),t=l(12115),i=l(79451),s=l(42917);function r(){return(0,n.jsxs)("main",{className:"mx-auto max-w-2xl p-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Edit your card"}),(0,n.jsx)(i.k,{children:(0,n.jsx)(o,{})})]})}function o(){var e,a,l,i,r,o;let[c,d]=(0,t.useState)(null);async function u(e){var a,l;e.preventDefault();let n=Object.fromEntries(new FormData(e.currentTarget).entries()),t=null==(l=(await (0,s.$)()).tokens)||null==(a=l.idToken)?void 0:a.toString();t&&(await fetch("/api/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({name:n.name,title:n.title,company:n.company,email:n.email,phone:n.phone,location:n.location,website:n.website,socials:[{label:"LinkedIn",url:n.linkedin},{label:"X",url:n.x},{label:"Email",url:"mailto:".concat(n.email)}]})}),alert("Saved"))}return((0,t.useEffect)(()=>{(async()=>{var e,a;let l=null==(a=(await (0,s.$)()).tokens)||null==(e=a.idToken)?void 0:e.toString();if(!l)return;await fetch("/api/profile",{method:"POST",headers:{Authorization:"Bearer ".concat(l)}});let n=await fetch("/api/profile",{method:"POST",headers:{Authorization:"Bearer ".concat(l)}});d(await n.json())})()},[]),c)?(0,n.jsxs)("form",{className:"grid grid-cols-1 gap-3",onSubmit:u,children:[["name","title","company","email","phone","location","website"].map(e=>{var a;return(0,n.jsxs)("label",{className:"grid gap-1",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:e}),(0,n.jsx)("input",{name:e,defaultValue:null!=(a=null==c?void 0:c[e])?a:"",className:"border rounded px-3 py-2"})]},e)}),(0,n.jsxs)("label",{className:"grid gap-1",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"LinkedIn"}),(0,n.jsx)("input",{name:"linkedin",defaultValue:null!=(r=null==c||null==(a=c.socials)||null==(e=a.find(e=>"LinkedIn"===e.label))?void 0:e.url)?r:"",className:"border rounded px-3 py-2"})]}),(0,n.jsxs)("label",{className:"grid gap-1",children:[(0,n.jsx)("span",{className:"text-sm text-gray-600",children:"X"}),(0,n.jsx)("input",{name:"x",defaultValue:null!=(o=null==c||null==(i=c.socials)||null==(l=i.find(e=>"X"===e.label))?void 0:l.url)?o:"",className:"border rounded px-3 py-2"})]}),(0,n.jsx)("div",{className:"flex gap-3 items-center",children:(0,n.jsx)("button",{className:"mt-2 inline-flex items-center justify-center px-4 py-2 rounded bg-aws-orange text-black font-medium w-fit",type:"submit",children:"Save"})})]}):(0,n.jsx)("p",{children:"Loadingâ€¦"})}},74708:(e,a,l)=>{Promise.resolve().then(l.bind(l,60116))}},e=>{e.O(0,[16,176,451,441,255,358],()=>e(e.s=74708)),_N_E=e.O()}]);