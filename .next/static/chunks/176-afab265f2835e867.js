"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[176],{1133:(e,t,n)=>{n.d(t,{K7:()=>o,Q8:()=>r,jy:()=>i,mU:()=>a});let o=3,i="amz-sdk-invocation-id",r="amz-sdk-request",a=3e5},2035:(e,t,n)=>{n.d(t,{q:()=>o});let o=(e,t)=>(n,o)=>{let i={},r=t=>e(t,o);for(let e=t.length-1;e>=0;e--)r=(0,t[e])(o)(r,i);return r(n)}},2223:(e,t,n)=>{n.d(t,{o:()=>o});let o=URL},3015:(e,t,n)=>{n.d(t,{j:()=>o});let o=e=>{let{headers:t,statusCode:n}=e;return{...i(e)?e.$metadata:{},httpStatusCode:n,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},i=e=>"object"==typeof e?.$metadata},5431:(e,t,n)=>{n.d(t,{C:()=>r,J:()=>i});var o=n(39820);function i(e){let t=e?.split("_")[0];if(!e||0>e.indexOf("_")||!t||"string"!=typeof t)throw new o.l({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}function r(e){if(!e||!e.includes(":"))throw new o.l({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}},7714:(e,t,n)=>{n.d(t,{e:()=>r});var o=n(2035),i=n(67906);let r=(0,o.q)(i.F,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}])},9588:(e,t,n)=>{var o,i,r,a,s,d,u,c,l,h,g,f,y,m;n.d(t,{BM:()=>d,ID:()=>c,b7:()=>i,dT:()=>o,r5:()=>l,rn:()=>r,sZ:()=>m}),function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"}(o||(o={})),function(e){e.AI="ai",e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"}(i||(i={})),function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnMessage="7",e.Generation="8",e.UpdateConversation="9"}(r||(r={})),function(e){e.Record="1",e.IdentifyUser="2"}(a||(a={})),function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"}(s||(s={})),function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36",e.StartWebAuthnRegistration="37",e.CompleteWebAuthnRegistration="38",e.ListWebAuthnCredentials="39",e.DeleteWebAuthnCredential="40"}(d||(d={})),function(e){e.Subscribe="1",e.GraphQl="2"}(u||(u={})),function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"}(c||(c={})),function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"}(l||(l={})),(h||(h={})).None="0",function(e){e.Convert="1",e.Identify="2",e.Interpret="3"}(g||(g={})),(f||(f={})).Subscribe="1",function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"}(y||(y={})),function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7",e.GetDataAccess="8",e.ListCallerAccessGrants="9"}(m||(m={}))},10005:(e,t,n)=>{n.d(t,{C:()=>s});var o=n(30861),i=n(47192),r=n(53110),a=n(78735);let s={service:n(79301).M,retryDecider:(0,o.D)(i.F),computeDelay:r.y,get userAgentValue(){return(0,a.fE)()},cache:"no-store"}},11529:(e,t,n)=>{n.d(t,{A:()=>o});let o=(e,t,n,o)=>async(i,r)=>{let a={...o,...i},s=await a.endpointResolver(a,r),d=await t(r,s);return n(await e(d,{...a}))}},22411:(e,t,n)=>{n.d(t,{o:()=>a});var o=n(2223),i=n(26239),r=n(79301);let a=({endpointOverride:e})=>t=>e?{url:new o.o(e)}:(({region:e})=>({url:new o.o(`https://${r.M}.${e}.${(0,i.R)(e)}`)}))(t)},23411:(e,t,n)=>{n.d(t,{p:()=>i});var o=n(35993);let i=(e,t=o.x)=>(n,o,i)=>{let{message:r,recoverySuggestion:a}=e[o];if(!n)throw new t({name:o,message:i?`${r} ${i}`:r,recoverySuggestion:a})}},24471:(e,t,n)=>{n.d(t,{f:()=>i});var o=n(42014);let i=new(n(81230)).S(o.ZL)},26239:(e,t,n)=>{n.d(t,{R:()=>r});let o={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},i={partitions:[o,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},r=e=>{let{partitions:t}=i;for(let{regions:n,outputs:o,regionRegex:i}of t){let t=new RegExp(i);if(n.includes(e)||t.test(e))return o.dnsSuffix}return o.outputs.dnsSuffix}},26348:(e,t,n)=>{var o;n.d(t,{m:()=>o}),function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown",e.NetworkError="NetworkError"}(o||(o={}))},30861:(e,t,n)=>{n.d(t,{D:()=>r});var o=n(26348);let i=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],r=e=>async(t,n)=>{let o=n??await e(t)??void 0,r=o?.code||o?.name,a=t?.statusCode;return{retryable:u(n)||d(a,r)||(e=>!!e&&i.includes(e))(r)||c(a,r)}},a=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],s=["TimeoutError","RequestTimeout","RequestTimeoutException"],d=(e,t)=>429===e||!!t&&a.includes(t),u=e=>[o.m.NetworkError,"ERR_NETWORK"].includes(e?.name),c=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&s.includes(t)},31622:(e,t,n)=>{n.d(t,{m:()=>i});var o=n(88968);let i={convert(e,t){let n=e;return t?.urlSafe&&(n=n.replace(/-/g,"+").replace(/_/g,"/")),(0,o.nW)()(n)}}},39820:(e,t,n)=>{n.d(t,{l:()=>i});var o=n(35993);class i extends o.x{constructor(e){super(e),this.constructor=i,Object.setPrototypeOf(this,i.prototype)}}},41113:(e,t,n)=>{n.d(t,{B:()=>o});let o=()=>"undefined"!=typeof window&&void 0!==window.document},42014:(e,t,n)=>{n.d(t,{ZL:()=>y,pR:()=>m});var o=n(26348),i=n(35993);class r extends i.x{constructor(){super({name:o.m.PlatformNotSupported,message:"Function not supported on current platform"})}}class a{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new r;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new r;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new r;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new r;this.storage.clear()}}var s=n(94389);class d{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}let u=new s.C("CoreStorageUtils"),c=()=>{try{if("undefined"!=typeof window&&window.sessionStorage)return window.sessionStorage.getItem("test"),window.sessionStorage;throw Error("sessionStorage is not defined")}catch(e){return u.info("sessionStorage not found. InMemoryStorage is used as a fallback."),new d}};class l extends a{constructor(){super((()=>{try{if("undefined"!=typeof window&&window.localStorage)return window.localStorage}catch(e){u.info("localStorage not found. InMemoryStorage is used as a fallback.")}return new d})())}}class h extends a{constructor(){super(c())}}class g{constructor(e){this._storage=e}get storage(){if(!this._storage)throw new r;return this._storage}setItem(e,t){this.storage.setItem(e,t)}getItem(e){return this.storage.getItem(e)}removeItem(e){this.storage.removeItem(e)}clear(){this.storage.clear()}}class f extends g{constructor(){super(c())}}let y=new l;new h;let m=new f;new a(new d)},44715:(e,t,n)=>{n.d(t,{$6:()=>c,A0:()=>s,Cs:()=>h,RW:()=>d,jK:()=>u,kM:()=>a,mh:()=>l,yA:()=>g,z0:()=>r,zz:()=>i});var o=n(39820);let i="UserUnAuthenticatedException",r="UserAlreadyAuthenticatedException",a="DeviceMetadataNotFoundException",s="AutoSignInException",d=new o.l({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."});new o.l({name:"InvalidAppSchemeException",message:"A valid non-http app scheme was not found in the config.",recoverySuggestion:"Please make sure a valid custom app scheme is present in the config."});let u=new o.l({name:"InvalidPreferredRedirectUrlException",message:"The given preferredRedirectUrl does not match any items in the redirectSignOutUrls array from the config.",recoverySuggestion:"Please make sure a matching preferredRedirectUrl is provided."}),c=new o.l({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."}),l="OAuthSignOutException",h="TokenRefreshException",g="UnexpectedSignInInterruptionException"},47192:(e,t,n)=>{n.d(t,{F:()=>i,Y:()=>r});var o=n(3015);let i=async e=>{if(!e||e.statusCode<300)return;let t=await r(e),n=(e=>{let[t]=e.toString().split(/[,:]+/);return t.includes("#")?t.split("#")[1]:t})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError");return Object.assign(Error(t.message??t.Message??"Unknown error"),{name:n,$metadata:(0,o.j)(e)})},r=async e=>{if(!e.body)throw Error("Missing response payload");return Object.assign(await e.body.json(),{$metadata:(0,o.j)(e)})}},48701:(e,t,n)=>{n.d(t,{_:()=>o});let o=e=>(t,n)=>r(n,i(e),JSON.stringify(t)),i=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),r=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"})},50160:(e,t,n)=>{n.d(t,{Eh:()=>c,G6:()=>u,$y:()=>d,Cq:()=>l});var o,i=n(31622),r=n(23411);!function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"}(o||(o={}));let a={[o.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[o.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[o.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[o.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[o.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}},s=(0,r.p)(a);function d(e){s(!!e&&!!e.userPoolId&&!!e.userPoolClientId,o.AuthUserPoolException)}function u(e){s(!!e?.loginWith?.oauth?.domain&&!!e?.loginWith?.oauth?.redirectSignOut&&!!e?.loginWith?.oauth?.redirectSignIn&&!!e?.loginWith?.oauth?.responseType,o.OAuthNotConfigureException)}function c(e){s(!!e?.identityPoolId,o.InvalidIdentityPoolIdException)}function l(e){let t=e.split(".");if(3!==t.length)throw Error("Invalid token");try{let n=t[1].replace(/-/g,"+").replace(/_/g,"/"),o=decodeURIComponent(i.m.convert(n).split("").map(e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),r=JSON.parse(o);return{toString:()=>e,payload:r}}catch(e){throw Error("Invalid token payload")}}},51769:(e,t,n)=>{n.d(t,{Uv:()=>l,Qm:()=>g});var o,i=n(50160),r=n(39820);let a={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails",oauthMetadata:"oauthMetadata"};var s=n(23411);(o||(o={})).InvalidAuthTokens="InvalidAuthTokens";let d={[o.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}},u=(0,s.p)(d),c="CognitoIdentityServiceProvider";class l{getKeyValueStorage(){if(!this.keyValueStorage)throw new r.l({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{let e=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e.accessToken);if(!t)throw new r.l({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});let n=(0,i.Cq)(t),o=await this.getKeyValueStorage().getItem(e.idToken),a=o?(0,i.Cq)(o):void 0,s=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,d=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",u=Number.parseInt(d),c=await this.getKeyValueStorage().getItem(e.signInDetails),l={accessToken:n,idToken:a,refreshToken:s,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:u,username:await this.getLastAuthUser()};return c&&(l.signInDetails=JSON.parse(c)),l}catch(e){return null}}async storeTokens(e){u(void 0!==e,o.InvalidAuthTokens);let t=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);let n=await this.getAuthKeys();await this.getKeyValueStorage().setItem(n.accessToken,e.accessToken.toString()),e.idToken?await this.getKeyValueStorage().setItem(n.idToken,e.idToken.toString()):await this.getKeyValueStorage().removeItem(n.idToken),e.refreshToken?await this.getKeyValueStorage().setItem(n.refreshToken,e.refreshToken):await this.getKeyValueStorage().removeItem(n.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(n.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(n.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(n.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails?await this.getKeyValueStorage().setItem(n.signInDetails,JSON.stringify(e.signInDetails)):await this.getKeyValueStorage().removeItem(n.signInDetails),await this.getKeyValueStorage().setItem(n.clockDrift,`${e.clockDrift}`)}async clearTokens(){let e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey()),this.getKeyValueStorage().removeItem(e.oauthMetadata)])}async getDeviceMetadata(e){let t=await this.getAuthKeys(e),n=await this.getKeyValueStorage().getItem(t.deviceKey),o=await this.getKeyValueStorage().getItem(t.deviceGroupKey),i=await this.getKeyValueStorage().getItem(t.randomPasswordKey);return i&&o&&n?{deviceKey:n,deviceGroupKey:o,randomPassword:i}:null}async clearDeviceMetadata(e){let t=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])}async getAuthKeys(e){(0,i.$y)(this.authConfig?.Cognito);let t=e??await this.getLastAuthUser();return h(c,`${this.authConfig.Cognito.userPoolClientId}.${t}`)}getLastAuthUserKey(){(0,i.$y)(this.authConfig?.Cognito);let e=this.authConfig.Cognito.userPoolClientId;return`${c}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}async setOAuthMetadata(e){let{oauthMetadata:t}=await this.getAuthKeys();await this.getKeyValueStorage().setItem(t,JSON.stringify(e))}async getOAuthMetadata(){let{oauthMetadata:e}=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e);return t&&JSON.parse(t)}}let h=(e,t)=>g(a)(`${e}`,t);function g(e){let t=Object.values({...e});return(e,n)=>t.reduce((t,o)=>({...t,[o]:`${e}.${n}.${o}`}),{})}},53110:(e,t,n)=>{n.d(t,{y:()=>i});var o=n(1133);let i=e=>{let t=(function(e=3e5){return t=>{let n=2**t*100+100*Math.random();return!(n>e)&&n}})(o.mU)(e);return!1===t?o.mU:t}},59547:(e,t,n)=>{n.d(t,{e:()=>r});var o=n(26348),i=n(39820);function r(e){if(!e||"Error"===e.name||e instanceof TypeError)throw new i.l({name:o.m.Unknown,message:"An unknown error has occurred.",underlyingError:e})}},62843:(e,t,n)=>{n.d(t,{Q:()=>A,o:()=>x});var o=n(42014),i=n(50160),r=n(5431),a=n(74652),s=n(39820),d=n(22411),u=n(11529),c=n(48701),l=n(66572),h=n(7714),g=n(10005);let f=(e=>{let t;return async(...n)=>t||(t=new Promise((o,i)=>{e(...n).then(e=>{o(e)}).catch(e=>{i(e)}).finally(()=>{t=void 0})}))})(async({tokens:e,authConfig:t,username:n})=>{let o;(0,i.$y)(t?.Cognito);let{userPoolId:f,userPoolClientId:y,userPoolEndpoint:m}=t.Cognito,p=(0,r.J)(f);(0,a.X4)(e);let I=(o={endpointResolver:(0,d.o)({endpointOverride:m})},(0,u.A)(h.e,(0,c._)("GetTokensFromRefreshToken"),(0,l.T)(),{...g.C,...o})),{AuthenticationResult:w}=await I({region:p},{ClientId:y,RefreshToken:e.refreshToken,DeviceKey:e.deviceMetadata?.deviceKey}),v=(0,i.Cq)(w?.AccessToken??""),S=w?.IdToken?(0,i.Cq)(w.IdToken):void 0,{iat:k}=v.payload;if(!k)throw new s.l({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:v,idToken:S,clockDrift:1e3*k-new Date().getTime(),refreshToken:w?.RefreshToken??e.refreshToken,username:n}});var y=n(51769),m=n(35943),p=n(41113);function I({expiresAt:e,clockDrift:t,tolerance:n=5e3}){return Date.now()+t+n>e}var w=n(26348),v=n(59547),S=n(24471),k=n(80049);class C{constructor(){this.waitForInflightOAuth=(0,p.B)()?async()=>{if(await S.f.loadOAuthInFlight())return this.inflightPromise||(this.inflightPromise=new Promise((e,t)=>{(0,k.I)(e)})),this.inflightPromise}:async()=>{}}setAuthConfig(e){S.f.setAuthConfig(e.Cognito),this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}getTokenStore(){if(!this.tokenStore)throw new s.l({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new s.l({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(e){let t;try{(0,i.$y)(this.authConfig?.Cognito)}catch(e){return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,t=await this.getTokenStore().loadTokens();let n=await this.getTokenStore().getLastAuthUser();if(null===t)return null;let o=!!t?.idToken&&I({expiresAt:(t.idToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0}),r=I({expiresAt:(t.accessToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0});return(e?.forceRefresh||o||r)&&null===(t=await this.refreshTokens({tokens:t,username:n}))?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}}async refreshTokens({tokens:e,username:t}){try{let{signInDetails:n}=e,o=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:t});return o.signInDetails=n,await this.setTokens({tokens:o}),m.YZ.dispatch("auth",{event:"tokenRefresh"},"Auth",m.U9),o}catch(e){return this.handleErrors(e)}}handleErrors(e){if((0,v.e)(e),e.name!==w.m.NetworkError&&this.clearTokens(),m.YZ.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",m.U9),e.name.startsWith("NotAuthorizedException"))return null;throw e}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}setOAuthMetadata(e){return this.getTokenStore().setOAuthMetadata(e)}getOAuthMetadata(){return this.getTokenStore().getOAuthMetadata()}}class T{constructor(){this.authTokenStore=new y.Uv,this.authTokenStore.setKeyValueStorage(o.ZL),this.tokenOrchestrator=new C,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(f)}getTokens({forceRefresh:e}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:e})}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}}let A=new T,{tokenOrchestrator:x}=A},66572:(e,t,n)=>{n.d(t,{T:()=>a});var o=n(47192),i=n(59547),r=n(39820);let a=()=>async e=>{if(e.statusCode>=300){let t=await (0,o.F)(e);throw(0,i.e)(t),new r.l({name:t.name,message:t.message,metadata:t.$metadata})}return(0,o.Y)(e)}},67906:(e,t,n)=>{let o;n.d(t,{F:()=>m});var i=n(1133);let r=(e,t)=>{let n,o;if(t?.aborted)return Promise.resolve();let i=new Promise(t=>{o=t,n=setTimeout(t,e)});return t?.addEventListener("abort",function e(i){clearTimeout(n),t?.removeEventListener("abort",e),o()}),i},a=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})},s={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},d=new Uint8Array(16),u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));let c=function(e,t,n){if(s.randomUUID&&!t&&!e)return s.randomUUID();let i=(e=e||{}).random??e.rng?.()??function(){if(!o){if("undefined"==typeof crypto||!crypto.getRandomValues)throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");o=crypto.getRandomValues.bind(crypto)}return o(d)}();if(i.length<16)throw Error("Random bytes length must be >= 16");if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){if((n=n||0)<0||n+16>t.length)throw RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=i[e];return t}return function(e,t=0){return(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase()}(i)};n(90290),n(78652);var l=n(2035),h=n(35993),g=n(26348);let f=e=>{let t;return()=>(t||(t=e()),t)},y=async({url:e,method:t,headers:n,body:o},{abortSignal:i,cache:r,withCrossDomainCredentials:a})=>{let s;try{s=await fetch(e,{method:t,headers:n,body:["HEAD","GET"].includes(t.toUpperCase())?void 0:o,signal:i,cache:r,credentials:a?"include":"same-origin"})}catch(e){if(e instanceof TypeError)throw new h.x({name:g.m.NetworkError,message:"A network error has occurred.",underlyingError:e});throw e}let d={};s.headers?.forEach((e,t)=>{d[t.toLowerCase()]=e});let u={statusCode:s.status,headers:d,body:null},c=Object.assign(s.body??{},{text:f(()=>s.text()),blob:f(()=>s.blob()),json:f(()=>s.json())});return{...u,body:c}},m=(0,l.q)(y,[({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>n=>async function(o){if(0===t.trim().length)return await n(o);{let i=e.toLowerCase();return o.headers[i]=o.headers[i]?`${o.headers[i]} ${t}`:t,await n(o)}},()=>e=>async function(t){return t.headers[i.jy]||(t.headers[i.jy]=c()),e(t)},({maxAttempts:e=i.K7,retryDecider:t,computeDelay:n,abortSignal:o})=>{if(e<1)throw Error("maxAttempts must be greater than 0");return(i,s)=>async function(d){let u,c,l=s.attemptsCount??0,h=()=>{if(c)return a(c,l),c;throw a(u,l),u};for(;!o?.aborted&&l<e;){try{c=await i(d),u=void 0}catch(e){u=e,c=void 0}l=(s.attemptsCount??0)>l?s.attemptsCount??0:l+1,s.attemptsCount=l;let{isCredentialsExpiredError:a,retryable:g}=await t(c,u,s);if(!g)return h();if(s.isCredentialsExpired=!!a,!o?.aborted&&l<e){let e=n(l);await r(e,o)}}if(!o?.aborted)return h();throw Error("Request aborted.")}},({maxAttempts:e=i.K7})=>(t,n)=>async function(o){let r=n.attemptsCount??0;return o.headers[i.Q8]=`attempt=${r+1}; max=${e}`,t(o)}])},74652:(e,t,n)=>{n.d(t,{H0:()=>r,OW:()=>a,O_:()=>c,X4:()=>u,f3:()=>l});var o=n(39820),i=n(44715);function r(e){if(!e||!e.accessToken)throw new o.l({name:i.zz,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}function a(e){if(!e||!e.idToken)throw new o.l({name:i.zz,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}let s=new o.l({name:i.Cs,message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),d=new o.l({name:i.zz,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."});function u(e){var t,n;if(h(t=e)&&!t?.refreshToken)throw s;if(!(h(n=e)&&n?.refreshToken))throw d}function c(e){if(!e||!e.deviceKey||!e.deviceGroupKey||!e.randomPassword)throw new o.l({name:i.kM,message:"Either deviceKey, deviceGroupKey or secretPassword were not found during the sign-in process.",recoverySuggestion:"Make sure to not clear storage after calling the signIn API."})}let l={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function h(e){return e?.accessToken||e?.idToken}},75276:(e,t,n)=>{n.d(t,{E:()=>i,e:()=>r});let o={},i=e=>{o[e.category]=e.apis.reduce((t,n)=>({...t,[n]:{refCount:t[n]?.refCount?t[n].refCount+1:1,additionalDetails:e.additionalDetails}}),o[e.category]??{});let t=!1;return()=>{t||(t=!0,e.apis.forEach(t=>{let n=o[e.category][t].refCount;n>1?o[e.category][t].refCount=n-1:(delete o[e.category][t],Object.keys(o[e.category]).length||delete o[e.category])}))}},r=(e,t)=>o[e]?.[t]?.additionalDetails},78735:(e,t,n)=>{let o;n.d(t,{fE:()=>v});var i=n(9588);let r="6.15.6";var a=n(95704);let s=(e,t)=>!!Object.keys(e).find(e=>e.startsWith(t));var d=n(95704),u=n(95704),c=n(95704);let l=[{platform:i.dT.Expo,detectionMethod:function(){return"undefined"!=typeof global&&void 0!==global.expo}},{platform:i.dT.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:i.dT.NextJs,detectionMethod:function(){return"undefined"!=typeof window&&window.next&&"object"==typeof window.next}},{platform:i.dT.Nuxt,detectionMethod:function(){return"undefined"!=typeof window&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:i.dT.Angular,detectionMethod:function(){let e=!!("undefined"!=typeof document&&document.querySelector("[ng-version]")),t="undefined"!=typeof window&&void 0!==window.ng;return e||t}},{platform:i.dT.React,detectionMethod:function(){let e=e=>e.startsWith("_react")||e.startsWith("__react");return"undefined"!=typeof document&&Array.from(document.querySelectorAll("[id]")).some(t=>Object.keys(t).find(e))}},{platform:i.dT.VueJs,detectionMethod:function(){return"undefined"!=typeof window&&s(window,"__VUE")}},{platform:i.dT.Svelte,detectionMethod:function(){return"undefined"!=typeof window&&s(window,"__SVELTE")}},{platform:i.dT.WebUnknown,detectionMethod:function(){return"undefined"!=typeof window}},{platform:i.dT.NextJsSSR,detectionMethod:function(){return"undefined"!=typeof global&&(s(global,"__next")||s(global,"__NEXT"))}},{platform:i.dT.NuxtSSR,detectionMethod:function(){return"undefined"!=typeof global&&void 0!==global.__NUXT_PATHS__}},{platform:i.dT.ReactSSR,detectionMethod:function(){return void 0!==a&&void 0!==d.env&&!!Object.keys(d.env).find(e=>e.includes("react"))}},{platform:i.dT.VueJsSSR,detectionMethod:function(){return"undefined"!=typeof global&&s(global,"__VUE")}},{platform:i.dT.AngularSSR,detectionMethod:function(){return void 0!==a&&"object"==typeof c.env&&c.env.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:i.dT.SvelteSSR,detectionMethod:function(){return void 0!==a&&void 0!==u.env&&!!Object.keys(u.env).find(e=>e.includes("svelte"))}}],h=[],g=!1,f=()=>{if(!o){if(o=l.find(e=>e.detectionMethod())?.platform||i.dT.ServerSideUnknown,g)for(;h.length;)h.pop()?.();else h.forEach(e=>{e()});y(i.dT.ServerSideUnknown,10),y(i.dT.WebUnknown,10)}return o};function y(e,t){o!==e||g||setTimeout(()=>{o=void 0,g=!0,setTimeout(f,1e3)},t)}var m=n(75276);let p="aws-amplify",I=e=>e.replace(/\+.*/,"");class w{constructor(){this.userAgent=`${p}/${I(r)}`}get framework(){return f()}get isReactNative(){return this.framework===i.dT.ReactNative||this.framework===i.dT.Expo}observeFrameworkChanges(e){g||h.push(e)}}new w;let v=e=>(({category:e,action:t}={})=>{let n=[[p,I(r)]];if(e&&n.push([e,t]),n.push(["framework",f()]),e&&t){let o=(0,m.e)(e,t);o&&o.forEach(e=>{n.push(e)})}return n})(e).map(([e,t])=>e&&t?`${e}/${t}`:e).join(" ")},79301:(e,t,n)=>{n.d(t,{M:()=>o});let o="cognito-idp"},80049:(e,t,n)=>{n.d(t,{I:()=>i,i:()=>r});let o=[],i=e=>{o.push(e)},r=()=>{for(;o.length;)o.pop()?.()}},81230:(e,t,n)=>{n.d(t,{S:()=>d});var o=n(50160),i=n(51769),r=n(74652);let a="amplify-signin-with-hostedUI",s="CognitoIdentityServiceProvider";class d{constructor(e){this.keyValueStorage=e}async clearOAuthInflightData(){(0,o.$y)(this.cognitoConfig);let e=u(s,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(e.inflightOAuth),this.keyValueStorage.removeItem(e.oauthPKCE),this.keyValueStorage.removeItem(e.oauthState)])}async clearOAuthData(){(0,o.$y)(this.cognitoConfig);let e=u(s,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(a),this.keyValueStorage.removeItem(e.oauthSignIn)}loadOAuthState(){(0,o.$y)(this.cognitoConfig);let e=u(s,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthState)}storeOAuthState(e){(0,o.$y)(this.cognitoConfig);let t=u(s,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthState,e)}loadPKCE(){(0,o.$y)(this.cognitoConfig);let e=u(s,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthPKCE)}storePKCE(e){(0,o.$y)(this.cognitoConfig);let t=u(s,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthPKCE,e)}setAuthConfig(e){this.cognitoConfig=e}async loadOAuthInFlight(){(0,o.$y)(this.cognitoConfig);let e=u(s,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(e.inflightOAuth)==="true"}async storeOAuthInFlight(e){(0,o.$y)(this.cognitoConfig);let t=u(s,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(t.inflightOAuth,`${e}`)}async loadOAuthSignIn(){(0,o.$y)(this.cognitoConfig);let e=u(s,this.cognitoConfig.userPoolClientId),t=await this.keyValueStorage.getItem(a),[n,i]=(await this.keyValueStorage.getItem(e.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===n||"true"===t,preferPrivateSession:"true"===i}}async storeOAuthSignIn(e,t=!1){(0,o.$y)(this.cognitoConfig);let n=u(s,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(n.oauthSignIn,`${e},${t}`)}}let u=(e,t)=>(0,i.Qm)(r.f3)(e,t)},88968:(e,t,n)=>{n.d(t,{MY:()=>i,nW:()=>a,xA:()=>r});var o=n(35993);let i=()=>{if("object"==typeof window&&"object"==typeof window.crypto)return window.crypto;if("object"==typeof crypto)return crypto;throw new o.x({name:"MissingPolyfill",message:"Cannot resolve the `crypto` function from the environment."})},r=()=>{if("undefined"!=typeof window&&"function"==typeof window.btoa)return window.btoa;if("function"==typeof btoa)return btoa;throw new o.x({name:"Base64EncoderError",message:"Cannot resolve the `btoa` function from the environment."})},a=()=>{if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob;if("function"==typeof atob)return atob;throw new o.x({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})}},89176:(e,t,n)=>{function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}n.d(t,{E:()=>J});var i=function e(t,n){function i(e,i,r){if("undefined"!=typeof document){"number"==typeof(r=o({},n,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var s in r)r[s]&&(a+="; "+s,!0!==r[s]&&(a+="="+r[s].split(";")[0]));return document.cookie=e+"="+t.write(i,e)+a}}return Object.create({set:i,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],o={},i=0;i<n.length;i++){var r=n[i].split("="),a=r.slice(1).join("=");try{var s=decodeURIComponent(r[0]);if(o[s]=t.read(a,s),e===s)break}catch(e){}}return e?o[e]:o}},remove:function(e,t){i(e,"",o({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,o({},this.attributes,t))},withConverter:function(t){return e(o({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class r{constructor(e={}){let{path:t,domain:n,expires:o,sameSite:i,secure:r}=e;if(this.domain=n,this.path=t||"/",this.expires=Object.prototype.hasOwnProperty.call(e,"expires")?o:365,this.secure=!Object.prototype.hasOwnProperty.call(e,"secure")||r,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!i||!["strict","lax","none"].includes(i))throw Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===i&&!this.secure)throw Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=i}}async setItem(e,t){i.set(e,t,this.getData())}async getItem(e){return i.get(e)??null}async removeItem(e){i.remove(e,this.getData())}async clear(){let e=Object.keys(i.get()).map(e=>this.removeItem(e));await Promise.all(e)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}var a=n(42014),s=n(64016),d=n(42990),u=n(94389);n(90290),n(78652);var c=n(78735),l=n(3015),h=n(47192),g=n(11529),f=n(53110),y=n(30861);let m="cognito-identity",p={service:m,retryDecider:(0,y.D)(h.F),computeDelay:f.y,cache:"no-store"};var I=n(67906);let w=(0,n(2035).q)(I.F,[()=>e=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),v=e=>(t,n)=>k(n,S(e),JSON.stringify(t)),S=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),k=({url:e},t,n)=>({headers:t,url:e,body:n,method:"POST"}),C=e=>(0,g.A)(w,v("GetCredentialsForIdentity"),T,{...p,...e,userAgentValue:(0,c.fE)()}),T=async e=>{if(e.statusCode>=300)throw await (0,h.F)(e);let t=await (0,h.Y)(e);return{IdentityId:t.IdentityId,Credentials:A(t.Credentials),$metadata:(0,l.j)(e)}},A=({Expiration:e,...t}={})=>({...t,Expiration:e&&new Date(1e3*e)});var x=n(50160),E=n(39820),P=n(59547),b=n(5431),K=n(74652),R=n(26239),U=n(2223);let O=({endpointOverride:e})=>t=>e?{url:new U.o(e)}:(({region:e})=>({url:new U.o(`https://${m}.${e}.${(0,R.R)(e)}`)}))(t),D=async e=>{if(e.statusCode>=300)throw await (0,h.F)(e);return{IdentityId:(await (0,h.Y)(e)).IdentityId,$metadata:(0,l.j)(e)}};function _(e){let t=(0,x.Cq)(e).payload.iss,n={};if(!t)throw new E.l({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return n[t.replace(/(^\w+:|^)\/\//,"")]=e,n}async function V({tokens:e,authConfig:t,identityIdStore:n}){n.setAuthConfig({Cognito:t});let o=await n.loadIdentityId();if(o)return o.id;let i=e?.idToken?_(e.idToken.toString()):{},r=await M(i,t);return n.storeIdentityId({id:r,type:e?"primary":"guest"}),r}async function M(e,t){let n,o,i=t?.identityPoolId,r=(0,b.C)(i),a=(o={endpointResolver:O({endpointOverride:t.identityPoolEndpoint})},(0,g.A)(w,v("GetId"),D,{...p,...o,userAgentValue:(0,c.fE)()}));try{n=(await a({region:r},{IdentityPoolId:i,Logins:e})).IdentityId}catch(e){throw(0,P.e)(e),new E.l(e)}if(!n)throw new E.l({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return n}let $=new u.C("CognitoCredentialsProvider");class N{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){$.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){$.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){let t=e.authenticated,{tokens:n}=e,{authConfig:o}=e;try{(0,x.Eh)(o?.Cognito)}catch{return}if(!t&&!o.Cognito.allowGuestAccess)return;let{forceRefresh:i}=e,r=this.hasTokenChanged(n),a=await V({tokens:n,authConfig:o.Cognito,identityIdStore:this._identityIdStore});return((i||r)&&this.clearCredentials(),t)?((0,K.OW)(n),this.credsForOIDCTokens(o.Cognito,n,a)):this.getGuestCredentials(a,o.Cognito)}async getGuestCredentials(e,t){let n;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return $.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let o=(0,b.C)(t.identityPoolId),i=C({endpointResolver:O({endpointOverride:t.identityPoolEndpoint})});try{n=await i({region:o},{IdentityId:e})}catch(e){throw(0,P.e)(e),new E.l(e)}if(n?.Credentials?.AccessKeyId&&n?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let t={credentials:{accessKeyId:n.Credentials.AccessKeyId,secretAccessKey:n.Credentials.SecretKey,sessionToken:n.Credentials.SessionToken,expiration:n.Credentials.Expiration},identityId:e};return n.IdentityId&&(t.identityId=n.IdentityId,this._identityIdStore.storeIdentityId({id:n.IdentityId,type:"guest"})),this._credentialsAndIdentityId={...t,isAuthenticatedCreds:!1},t}throw new E.l({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,t,n){let o;if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return $.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let i=t.idToken?_(t.idToken.toString()):{},r=(0,b.C)(e.identityPoolId),a=C({endpointResolver:O({endpointOverride:e.identityPoolEndpoint})});try{o=await a({region:r},{IdentityId:n,Logins:i})}catch(e){throw(0,P.e)(e),new E.l(e)}if(o?.Credentials?.AccessKeyId&&o?.Credentials?.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let e={credentials:{accessKeyId:o.Credentials.AccessKeyId,secretAccessKey:o.Credentials.SecretKey,sessionToken:o.Credentials.SessionToken,expiration:o.Credentials.Expiration},identityId:n};return o.IdentityId&&(e.identityId=o.IdentityId,this._identityIdStore.storeIdentityId({id:o.IdentityId,type:"primary"})),this._credentialsAndIdentityId={...e,isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()},e}throw new E.l({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){return!!e&&!!this._credentialsAndIdentityId?.associatedIdToken&&e.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}var j=n(51769);let F={identityId:"identityId"},G=new u.C("DefaultIdentityIdStore");class L{setAuthConfig(e){(0,x.Eh)(e.Cognito),this.authConfig=e,this._authKeys=q("Cognito",e.Cognito.identityPoolId)}constructor(e){this._authKeys={},this._hasGuestIdentityId=!1,this.keyValueStorage=e}async loadIdentityId(){(0,x.Eh)(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{let e=await this.keyValueStorage.getItem(this._authKeys.identityId);if(e)return this._hasGuestIdentityId=!0,{id:e,type:"guest"};return null}}catch(e){return G.log("Error getting stored IdentityId.",e),null}}async storeIdentityId(e){(0,x.Eh)(this.authConfig?.Cognito),"guest"===e.type?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0,this._hasGuestIdentityId=!0):(this._primaryIdentityId=e.id,this._hasGuestIdentityId&&(this.keyValueStorage.removeItem(this._authKeys.identityId),this._hasGuestIdentityId=!1))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}let q=(e,t)=>(0,j.Qm)(F)(`com.amplify.${e}`,t),z=new N(new L(a.ZL));var W=n(62843);let J={configure(e,t){let n=(0,d.M)(e),o=new r({sameSite:"lax"}),i=t?.ssr?o:a.ZL,u=t?.ssr?new N(new L(o)):z;if(!n.Auth||t?.Auth)return void s.H.configure(n,t);if(!s.H.libraryOptions.Auth){W.Q.setAuthConfig(n.Auth),W.Q.setKeyValueStorage(i),s.H.configure(n,{...t,Auth:{tokenProvider:W.Q,credentialsProvider:u}});return}if(t){let e=s.H.libraryOptions.Auth;void 0!==t.ssr&&(W.Q.setKeyValueStorage(i),e.credentialsProvider=u),s.H.configure(n,{Auth:e,...t});return}s.H.configure(n)},getConfig:()=>s.H.getConfig()}}}]);